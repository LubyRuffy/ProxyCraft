# ProxyCraft Web模式测试指南

现在ProxyCraft已经在Web模式下成功启动，请按照以下步骤测试功能：

## 1. 访问Web界面

在浏览器中打开以下地址：
```
http://localhost:8081
```

应该能看到ProxyCraft的Web界面，界面上会有一个空的请求列表。

## 2. 配置浏览器使用代理

将浏览器的代理设置为：
- 地址：127.0.0.1
- 端口：8080

### Chrome配置代理的方法
- 在命令行启动Chrome：
  ```
  chrome --proxy-server=127.0.0.1:8080
  ```
- 或者使用SwitchyOmega等代理插件

### Firefox配置代理的方法
- 设置 -> 常规 -> 网络设置 -> 配置代理访问
- 选择手动配置代理
- HTTP代理：127.0.0.1，端口：8080
- 勾选"对所有协议使用相同代理"

## 3. 导入CA证书（用于HTTPS解密）

如果需要查看HTTPS请求内容，请导入CA证书：

```
./ProxyCraft -export-ca proxycraft-ca.pem
```

然后在浏览器/操作系统中导入此证书。

## 4. 进行测试

通过配置了代理的浏览器访问几个网站，例如：
- http://example.com
- https://www.baidu.com

然后回到ProxyCraft的Web界面，应该能看到捕获的HTTP请求列表。

点击任意请求，在下方面板可以查看请求和响应的详细信息。

## 5. 测试功能

在Web界面上测试以下功能：
- 点击"刷新"按钮，检查是否能刷新请求列表
- 点击列表中的请求，检查下方是否显示详情
- 切换请求/响应标签页，查看不同的详情内容
- 点击"清空"按钮，检查是否能清空列表

## 问题排查

如果遇到问题：
1. 确认ProxyCraft正在运行
2. 确认浏览器代理配置正确
3. 检查是否导入了CA证书（HTTPS请求）
4. 如果Web界面空白，检查构建是否成功，可以尝试重新运行build_web.sh

### 常见错误解决方法

#### 端口占用问题
如果启动时出现以下错误：
```
Failed to start proxy server: listen tcp 127.0.0.1:8080: bind: address already in use
```

这表示端口8080已被占用，可以通过以下方法解决：

1. 找出占用端口的进程：
   ```
   lsof -i :8080
   ```

2. 终止占用端口的进程：
   ```
   kill <PID>
   ```
   其中`<PID>`是上一步找到的进程ID

3. 或者使用不同的端口启动ProxyCraft：
   ```
   ./ProxyCraft -mode web -p 8081
   ```
   注意：此时需要在浏览器中将代理端口也设置为8081

#### Web界面显示"No Data"
如果Web界面打开但显示"No Data"，请确认：

1. 代理服务器是否成功启动（查看命令行输出）
2. 浏览器是否正确配置使用了代理
3. 是否通过配置了代理的浏览器访问了网页
4. 尝试点击Web界面上的"刷新"按钮 